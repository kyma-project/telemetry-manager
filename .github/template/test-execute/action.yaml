name: Test Execute
description: Executes the test suite with the specified parameters

inputs:
  id:
    description: A unique identifier of the test run (used for naming artifacts)
    required: true
  path:
    description: The path to the tests
    required: true
  labels:
    description: Labels to use for the tests
    required: false
    default: ""

runs:
  using: "composite"

  steps:
    - name: Run tests
      shell: bash
      run: make run-e2e
      env:
        TEST_ID: ${{ inputs.id }}
        TEST_PATH: ${{ inputs.path }}
        TEST_LABELS: ${{ inputs.labels }}
        MANAGER_IMAGE: ${{ env.MANAGER_IMAGE }}
        INSTALL_ISTIO: ${{ env.INSTALL_ISTIO }}
        ENABLE_EXPERIMENTAL: ${{ env.ENABLE_EXPERIMENTAL }}
        OPERATE_IN_FIPS_MODE: ${{ env.OPERATE_IN_FIPS_MODE }}
        CUSTOM_LABELS_ANNOTATIONS: ${{ env.CUSTOM_LABELS_ANNOTATIONS }}
