name: Test Execute
description: Executes the test suite with the specified parameters

inputs:
  id:
    description: A unique identifier of the test run (used for naming artifacts)
    required: true
  path:
    description: The path to the tests
    required: true
  labels:
    description: Labels to use for the tests
    required: false
    default: ""

runs:
  using: "composite"

  steps:
    - name: Run tests with gotestsum
      shell: bash
      run: |
        bin/gotestsum \
          --format pkgname \
          --hide-summary=skipped \
          --junitfile junit-report-${{ inputs.id }}.xml \
          -- -timeout=20m ${{ inputs.path }} \
          -- -labels="${{ inputs.labels }}"
